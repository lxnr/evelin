# Инструкция по деплою Эвелин на Railway

## Пошаговая инструкция

### 1. Получение API ключа Google Gemini (БЕСПЛАТНО)

1. Открой браузер и перейди на: https://makersuite.google.com/app/apikey
2. Войди в свой Google аккаунт (или создай новый если нет)
3. Нажми кнопку **"Create API Key"**
4. Выбери **"Create API key in new project"**
5. Скопируй полученный ключ (он будет выглядеть примерно так: `AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX`)
6. Сохрани его в надежном месте

**ВАЖНО:** Gemini API бесплатный! Есть лимиты:
- 60 запросов в минуту
- 1500 запросов в день
- Этого более чем достаточно для личного использования

### 2. Регистрация на Railway

1. Перейди на: https://railway.app
2. Нажми **"Login"**
3. Войди через GitHub (это самый простой способ)
4. Подтверди свой email

**ВАЖНО:** Railway дает $5 бесплатно каждый месяц. Этого хватит для работы бота.

### 3. Деплой проекта

#### Вариант A: Деплой из GitHub (рекомендуется)

1. Загрузи этот проект на свой GitHub:
   ```bash
   git add .
   git commit -m "Initial commit"
   git push
   ```

2. На Railway:
   - Нажми **"New Project"**
   - Выбери **"Deploy from GitHub repo"**
   - Выбери свой репозиторий `evelin`
   - Railway автоматически определит Python проект

3. Добавь переменные окружения:
   - Кликни на сервис (появится справа)
   - Перейди на вкладку **"Variables"**
   - Нажми **"New Variable"**
   - Добавь:
     - Имя: `GEMINI_API_KEY`
     - Значение: `твой_ключ_который_скопировал`
   - Добавь еще одну (опционально, токен уже в коде):
     - Имя: `TELEGRAM_TOKEN`
     - Значение: `8390567943:AAE-pqgOus6rZbymm93RH1e5mwug4k8OFSc`

4. Railway автоматически:
   - Установит зависимости из `requirements.txt`
   - Запустит бота через `Procfile`
   - Бот будет работать 24/7

#### Вариант B: Деплой через Railway CLI

1. Установи Railway CLI:
   ```bash
   npm i -g @railway/cli
   ```

2. Войди:
   ```bash
   railway login
   ```

3. Инициализируй проект:
   ```bash
   railway init
   ```

4. Добавь переменные окружения:
   ```bash
   railway variables set GEMINI_API_KEY=твой_ключ
   ```

5. Задеплой:
   ```bash
   railway up
   ```

### 4. Проверка работы бота

1. Подожди 1-2 минуты пока Railway задеплоит проект
2. Проверь логи:
   - В Railway кликни на сервис
   - Перейди на вкладку **"Deployments"**
   - Кликни на последний деплой
   - Посмотри логи - должно быть: `Evelin is online! ❤️`

3. Протестируй бота:
   - Открой Telegram
   - Найди: [@evelinanebot](https://t.me/evelinanebot)
   - Напиши: `/start`
   - Эвелин должна ответить!

### 5. Мониторинг

Railway показывает:
- **CPU/Memory usage** - использование ресурсов
- **Logs** - что происходит в боте
- **Metrics** - статистику работы

Если бот не отвечает:
1. Проверь логи в Railway
2. Убедись что добавил `GEMINI_API_KEY`
3. Проверь что в логах нет ошибок

### 6. Обновление бота

Когда захочешь что-то изменить:

1. Измени код локально
2. Закоммить и запуш на GitHub:
   ```bash
   git add .
   git commit -m "Update bot"
   git push
   ```
3. Railway автоматически задеплоит новую версию!

## Альтернативные варианты деплоя

### Heroku (бесплатный tier убрали, но можно использовать с картой)

1. Создай аккаунт на Heroku
2. Установи Heroku CLI
3. Деплой:
   ```bash
   heroku login
   heroku create evelin-bot
   heroku config:set GEMINI_API_KEY=твой_ключ
   git push heroku main
   ```

### Render (бесплатный tier)

1. Создай аккаунт на render.com
2. Создай новый **"Web Service"**
3. Подключи GitHub репозиторий
4. Добавь переменные окружения
5. Деплой!

### VPS (полный контроль)

Если хочешь запустить на своем сервере:

```bash
# Подключись к серверу
ssh user@your-server

# Клонируй репозиторий
git clone https://github.com/твой-username/evelin.git
cd evelin

# Установи зависимости
pip install -r requirements.txt

# Создай .env файл
echo "GEMINI_API_KEY=твой_ключ" > .env

# Запусти через screen чтобы работал в фоне
screen -S evelin
python bot.py

# Нажми Ctrl+A, затем D чтобы отсоединиться
```

## Устранение проблем

### Бот не отвечает

1. Проверь логи в Railway
2. Убедись что `GEMINI_API_KEY` правильный
3. Проверь что бот запущен (статус "Active")
4. Попробуй перезапустить сервис

### "GEMINI_API_KEY not set"

1. Зайди в Railway -> Variables
2. Добавь переменную `GEMINI_API_KEY`
3. Перезапусти сервис

### "Rate limit exceeded"

Превышен лимит запросов к Gemini API:
- Подожди немного (лимит обновляется каждую минуту)
- Или создай несколько API ключей и чередуй их

### Railway показывает ошибку при деплое

1. Проверь что `requirements.txt` корректный
2. Убедись что `Procfile` существует
3. Проверь логи деплоя в Railway

## Стоимость

- **Google Gemini API**: БЕСПЛАТНО (с лимитами)
- **Railway**: $5/месяц бесплатно (хватит для 1-2 ботов)
- **Телеграм**: бесплатно

**Итого: 0 рублей в месяц!**

## Безопасность

- **НЕ** выкладывай `GEMINI_API_KEY` в публичный репозиторий
- Используй переменные окружения Railway
- `.gitignore` уже настроен правильно

---

Если что-то непонятно - напиши мне, помогу разобраться!
